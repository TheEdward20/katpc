<h1 mat-dialog-title>{{ data.idServicio === 0 ? 'Nuevo Equipo' : 'Editar Equipo' }}</h1>

<mat-dialog-content>
    <mat-horizontal-stepper [linear]="true" #stepper>

        <!-- Paso 1: Datos del Servicios -->
        <mat-step [stepControl]="form">
            <form [formGroup]="form">
                <ng-template matStepLabel>Registro de Entrega y Recepcion de equipo de computo</ng-template>
                <div class="form-grid">
                    <mat-form-field class="example-full-width">
                        <mat-label>Folio</mat-label>
                        <input matInput formControlName="folio" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width">
                        <mat-label>Marca</mat-label>
                        <input matInput formControlName="marca" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width">
                        <mat-label>Modelo</mat-label>
                        <input matInput formControlName="modelo" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width">
                        <mat-label>Serie</mat-label>
                        <input matInput formControlName="serie" />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="example-full-width">
                        <mat-label>Fecha de Recepción</mat-label>
                        <input matInput [matDatepicker]="picker" formControlName="fechaderecepcion"
                            [value]="fechaFormateada" readonly />
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>

                    <p>{{ fechaFormateada }}</p> <!-- opcional: mostrar texto -->


                    <mat-form-field class="example-full-width">
                        <mat-label>nombre</mat-label>
                        <input matInput formControlName="nombre" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width">
                        <mat-label>No. de Telefono</mat-label>
                        <input matInput formControlName="telefono" />
                    </mat-form-field>

                </div>

                <div>
                    <button mat-button (click)="cancelar()">Cancelar</button>
                    <button mat-button matStepperNext>Siguiente</button>
                </div>
            </form>
        </mat-step>
        <mat-step [stepControl]="form">

            <form [formGroup]="form">
                <ng-template matStepLabel>Funcionamiento General del equipo</ng-template>
                <h3>Funcionamiento a la recepcion</h3>
                <!--Observaciones-->
                <div class="form-grid">
                    <mat-checkbox [checked]="form.value.enciende"
                        (change)="form.patchValue({ enciende: $event.checked })">
                        Enciende
                    </mat-checkbox>
                    <mat-checkbox [checked]="form.value.wifi" (change)="form.patchValue({ wifi: $event.checked })">
                        Wifi
                    </mat-checkbox>
                    <mat-checkbox [checked]="form.value.puertosusb"
                        (change)="form.patchValue({ puertosusb: $event.checked })">
                        Puertos USB
                    </mat-checkbox>
                    <mat-checkbox [checked]="form.value.bluetooth"
                        (change)="form.patchValue({ bluetooth: $event.checked })">
                        Bluetooth
                    </mat-checkbox>
                    <mat-checkbox [checked]="form.value.bocinas"
                        (change)="form.patchValue({ bocinas: $event.checked })">
                        Bocinas
                    </mat-checkbox>
                    <mat-checkbox [checked]="form.value.teclado"
                        (change)="form.patchValue({ teclado: $event.checked })">
                        Teclado
                    </mat-checkbox>
                    <mat-checkbox [checked]="form.value.pantalla"
                        (change)="form.patchValue({ pantalla: $event.checked })">
                        Pantalla
                    </mat-checkbox>
                    <mat-checkbox [checked]="form.value.microfono"
                        (change)="form.patchValue({ microfono: $event.checked })">
                        Microfono
                    </mat-checkbox>
                    <mat-checkbox [checked]="form.value.touchpad"
                        (change)="form.patchValue({ touchpad: $event.checked })">
                        Touchpad
                    </mat-checkbox>
                    <mat-checkbox [checked]="form.value.webcam" (change)="form.patchValue({ webcam: $event.checked })">
                        Webcam
                    </mat-checkbox>
                </div>
                <div>

                    <h3>Observaciones</h3>
                </div>
                <div class="form-grid">

                    <mat-form-field class="example-full-width full-row">
                        <mat-label>Observaciones</mat-label>
                        <textarea matInput formControlName="observaciones"></textarea>
                    </mat-form-field>
                </div>
                <div class="form-grid">
                    <mat-form-field class="example-full-width">
                        <mat-label>Password</mat-label>
                        <input matInput formControlName="pass" />
                    </mat-form-field>
                </div>
                <div>
                    <button mat-button (click)="cancelar()">Cancelar</button>
                    <button mat-button matStepperNext>Siguiente</button>
                </div>
            </form>
        </mat-step>
        <mat-step [stepControl]="form">

            <form [formGroup]="form">
                <div>

                    <ng-template matStepLabel>Diagnostico</ng-template>
                </div>
                <div class="form-grid">

                    <mat-form-field class="example-full-width">
                        <mat-label>Diagnostico y trabajo a realizar:</mat-label>
                        <textarea matInput formControlName="descripciondiagnostico"></textarea>
                    </mat-form-field>
                </div>
                <div class="form-grid">

                    <mat-form-field appearance="fill" class="full-width">
                        <mat-label>Costo</mat-label>
                        <input matInput type="number" formControlName="costo" placeholder="Ingrese el costo" step="0.01"
                            min="0">
                    </mat-form-field>
                    <p *ngIf="form.get('costo')?.value">
                        Total: {{ form.get('costo')?.value | currency:'MXN' }}
                    </p>
                </div>
                <div>
                    <button mat-button (click)="cancelar()">Cancelar</button>
                    <button mat-button matStepperPrevious>Atrás</button>
                    <button mat-raised-button color="primary" (click)="guardarServicio()"
                        [disabled]="form.invalid || loading">
                        Guardar
                        <div class="overlay" *ngIf="loading">
                            <mat-spinner diameter="80" color="accent"></mat-spinner>
                        </div>
                    </button>
                </div>
            </form>
        </mat-step>

    </mat-horizontal-stepper>
</mat-dialog-content>